/**
 * Design Tokens V2 - Simulateur Loi Jeanbrun
 * Enrichissement base sur l'analyse concurrentielle
 *
 * @version 2.0
 * @date 01 fevrier 2026
 *
 * CHANGELOG v2:
 * - Ajout palette "Trust" (bleu institutionnel)
 * - Ajout couleurs "Highlight" pour mise en valeur
 * - Ajout tokens motion Framer
 * - Ajout tokens typographie distinctive
 * - Ajout tokens "Trust Signals"
 */

/* ==========================================================================
   1. NOUVELLES COULEURS - EXTENSION PALETTE
   ========================================================================== */

:root {
  /* -------------------------------------------------------------------------
     1.1 TRUST COLORS (Bleu Institutionnel - Confiance)
     Inspire de la-loi-pinel.com et service-public.fr
     ------------------------------------------------------------------------- */

  --trust: oklch(0.55 0.18 250);              /* Bleu profond */
  --trust-light: oklch(0.70 0.14 250);        /* Bleu plus clair */
  --trust-background: oklch(0.12 0.04 250);   /* Fond bleu sombre */
  --trust-foreground: oklch(0.92 0.04 250);   /* Texte sur trust */

  /* -------------------------------------------------------------------------
     1.2 HIGHLIGHT COLORS (Mise en valeur resultats)
     Pour les economies/gains affiches
     ------------------------------------------------------------------------- */

  --highlight-economy: oklch(0.75 0.22 145);  /* Vert vif economies */
  --highlight-gain: oklch(0.80 0.20 75);      /* Or brillant gains */
  --highlight-premium: oklch(0.70 0.15 300);  /* Violet premium */

  /* -------------------------------------------------------------------------
     1.3 BRAND-TINTED NEUTRALS
     Gris teintes avec la hue de l'accent (75 - or)
     Pour une cohesion subtile
     ------------------------------------------------------------------------- */

  --neutral-50: oklch(0.98 0.005 75);
  --neutral-100: oklch(0.96 0.008 75);
  --neutral-200: oklch(0.90 0.010 75);
  --neutral-300: oklch(0.80 0.012 75);
  --neutral-400: oklch(0.65 0.015 75);
  --neutral-500: oklch(0.50 0.015 75);
  --neutral-600: oklch(0.40 0.012 75);
  --neutral-700: oklch(0.30 0.010 75);
  --neutral-800: oklch(0.20 0.008 75);
  --neutral-900: oklch(0.12 0.006 75);

  /* -------------------------------------------------------------------------
     1.4 TRUST SIGNAL TOKENS
     Pour les elements de confiance (badges, compteurs, certifications)
     ------------------------------------------------------------------------- */

  --trust-badge-bg: oklch(0.18 0.02 75);
  --trust-badge-border: oklch(0.78 0.18 75 / 0.3);
  --trust-badge-text: oklch(0.85 0.10 75);

  --counter-bg: oklch(0.12 0.03 145);
  --counter-number: oklch(0.80 0.20 145);
  --counter-label: oklch(0.70 0.05 0);

  --certification-bg: oklch(0.15 0.03 250);
  --certification-border: oklch(0.55 0.15 250);

  /* -------------------------------------------------------------------------
     1.5 FORM STEP COLORS
     Pour les formulaires multi-etapes
     ------------------------------------------------------------------------- */

  --step-completed: oklch(0.72 0.20 145);     /* Vert */
  --step-current: oklch(0.78 0.18 75);        /* Or */
  --step-upcoming: oklch(0.30 0.01 0);        /* Gris sombre */
  --step-line-active: oklch(0.78 0.18 75);
  --step-line-inactive: oklch(0.25 0.01 0);
}

/* ==========================================================================
   2. TYPOGRAPHIE DISTINCTIVE
   ========================================================================== */

:root {
  /* -------------------------------------------------------------------------
     2.1 FONT FAMILIES
     DM Serif Display pour titres = Gravite juridique/patrimoniale
     Inter Variable pour corps = Lisibilite moderne
     ------------------------------------------------------------------------- */

  --font-display: 'DM Serif Display', 'Georgia', serif;
  --font-sans: 'Inter Variable', 'Inter', ui-sans-serif, system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, monospace;

  /* -------------------------------------------------------------------------
     2.2 FONT SIZES RESPONSIVE (clamp)
     Min - Preferred - Max pour fluidite
     ------------------------------------------------------------------------- */

  --text-display-1: clamp(2.5rem, 5vw + 1rem, 4rem);    /* Hero */
  --text-display-2: clamp(2rem, 4vw + 0.5rem, 3rem);    /* Section */
  --text-h1: clamp(1.75rem, 3vw + 0.5rem, 2.5rem);
  --text-h2: clamp(1.5rem, 2.5vw + 0.25rem, 2rem);
  --text-h3: clamp(1.25rem, 2vw + 0.25rem, 1.5rem);
  --text-h4: clamp(1.125rem, 1.5vw + 0.25rem, 1.25rem);
  --text-body-lg: clamp(1rem, 1vw + 0.5rem, 1.125rem);
  --text-body: 1rem;
  --text-body-sm: 0.875rem;
  --text-caption: 0.75rem;

  /* -------------------------------------------------------------------------
     2.3 LINE HEIGHTS
     ------------------------------------------------------------------------- */

  --leading-display: 1.1;
  --leading-heading: 1.25;
  --leading-body: 1.6;
  --leading-tight: 1.4;

  /* -------------------------------------------------------------------------
     2.4 LETTER SPACING
     ------------------------------------------------------------------------- */

  --tracking-tighter: -0.04em;
  --tracking-tight: -0.02em;
  --tracking-normal: 0;
  --tracking-wide: 0.02em;
  --tracking-wider: 0.04em;
  --tracking-widest: 0.08em;
}

/* ==========================================================================
   3. SPACING TOKENS (8-point grid)
   ========================================================================== */

:root {
  /* Spacing scale */
  --space-px: 1px;
  --space-0-5: 0.125rem;  /* 2px */
  --space-1: 0.25rem;     /* 4px */
  --space-1-5: 0.375rem;  /* 6px */
  --space-2: 0.5rem;      /* 8px */
  --space-2-5: 0.625rem;  /* 10px */
  --space-3: 0.75rem;     /* 12px */
  --space-3-5: 0.875rem;  /* 14px */
  --space-4: 1rem;        /* 16px */
  --space-5: 1.25rem;     /* 20px */
  --space-6: 1.5rem;      /* 24px */
  --space-7: 1.75rem;     /* 28px */
  --space-8: 2rem;        /* 32px */
  --space-9: 2.25rem;     /* 36px */
  --space-10: 2.5rem;     /* 40px */
  --space-11: 2.75rem;    /* 44px */
  --space-12: 3rem;       /* 48px */
  --space-14: 3.5rem;     /* 56px */
  --space-16: 4rem;       /* 64px */
  --space-20: 5rem;       /* 80px */
  --space-24: 6rem;       /* 96px */
  --space-28: 7rem;       /* 112px */
  --space-32: 8rem;       /* 128px */

  /* Semantic spacing */
  --space-section-y: var(--space-24);       /* Entre sections */
  --space-container-x: var(--space-6);      /* Padding container */
  --space-card-padding: var(--space-6);     /* Padding cards */
  --space-input-gap: var(--space-4);        /* Entre inputs */
  --space-button-gap: var(--space-3);       /* Entre boutons */
}

/* ==========================================================================
   4. MOTION TOKENS (Framer Motion)
   ========================================================================== */

:root {
  /* -------------------------------------------------------------------------
     4.1 DURATIONS
     ------------------------------------------------------------------------- */

  --motion-instant: 0;
  --motion-fast: 0.1s;
  --motion-normal: 0.2s;
  --motion-slow: 0.3s;
  --motion-slower: 0.5s;
  --motion-slowest: 0.8s;

  /* Pour les compteurs animes */
  --motion-counter: 2s;

  /* Pour les orchestrations */
  --motion-stagger: 0.05s;
  --motion-stagger-slow: 0.1s;

  /* -------------------------------------------------------------------------
     4.2 EASINGS (pour CSS transitions)
     ------------------------------------------------------------------------- */

  --ease-linear: linear;
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* Easings expressifs */
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-elastic: cubic-bezier(0.68, -0.6, 0.32, 1.6);
  --ease-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);

  /* Spring-like pour Framer Motion (reference) */
  /* spring: { stiffness: 300, damping: 30 } */
  /* spring: { stiffness: 400, damping: 25 } - plus snappy */
}

/* ==========================================================================
   5. EFFECTS TOKENS
   ========================================================================== */

:root {
  /* -------------------------------------------------------------------------
     5.1 SHADOWS ENRICHIES
     ------------------------------------------------------------------------- */

  /* Shadows elevation */
  --shadow-xs: 0 1px 2px 0 oklch(0 0 0 / 0.3);
  --shadow-sm: 0 1px 3px 0 oklch(0 0 0 / 0.4), 0 1px 2px -1px oklch(0 0 0 / 0.4);
  --shadow-md: 0 4px 6px -1px oklch(0 0 0 / 0.5), 0 2px 4px -2px oklch(0 0 0 / 0.5);
  --shadow-lg: 0 10px 15px -3px oklch(0 0 0 / 0.6), 0 4px 6px -4px oklch(0 0 0 / 0.6);
  --shadow-xl: 0 20px 25px -5px oklch(0 0 0 / 0.7), 0 8px 10px -6px oklch(0 0 0 / 0.7);
  --shadow-2xl: 0 25px 50px -12px oklch(0 0 0 / 0.8);

  /* Glow effects */
  --glow-accent: 0 0 20px oklch(0.78 0.18 75 / 0.3);
  --glow-accent-lg: 0 0 40px oklch(0.78 0.18 75 / 0.4);
  --glow-accent-xl: 0 0 60px oklch(0.78 0.18 75 / 0.5);

  --glow-success: 0 0 20px oklch(0.72 0.20 145 / 0.3);
  --glow-trust: 0 0 20px oklch(0.55 0.18 250 / 0.3);

  /* -------------------------------------------------------------------------
     5.2 BLUR / BACKDROP
     ------------------------------------------------------------------------- */

  --blur-sm: 4px;
  --blur-md: 8px;
  --blur-lg: 16px;
  --blur-xl: 24px;

  --backdrop-blur: 12px;
  --backdrop-saturate: 1.8;

  /* -------------------------------------------------------------------------
     5.3 GRADIENTS
     ------------------------------------------------------------------------- */

  --gradient-gold: linear-gradient(135deg, oklch(0.78 0.18 75) 0%, oklch(0.85 0.15 85) 100%);
  --gradient-gold-subtle: linear-gradient(135deg, oklch(0.78 0.18 75 / 0.1) 0%, transparent 100%);

  --gradient-dark: linear-gradient(180deg, oklch(0.10 0 0) 0%, oklch(0.07 0 0) 100%);
  --gradient-dark-radial: radial-gradient(ellipse at center, oklch(0.12 0.005 285) 0%, oklch(0.07 0 0) 70%);

  --gradient-trust: linear-gradient(135deg, oklch(0.55 0.18 250) 0%, oklch(0.45 0.20 260) 100%);
  --gradient-success: linear-gradient(135deg, oklch(0.72 0.20 145) 0%, oklch(0.65 0.22 150) 100%);

  /* Hero background */
  --gradient-hero: radial-gradient(
    ellipse 80% 50% at 50% -20%,
    oklch(0.78 0.18 75 / 0.08) 0%,
    transparent 50%
  );

  /* -------------------------------------------------------------------------
     5.4 NOISE TEXTURE (optionnel)
     Pour ajouter de la profondeur
     ------------------------------------------------------------------------- */

  --noise-opacity: 0.02;
}

/* ==========================================================================
   6. Z-INDEX SCALE
   ========================================================================== */

:root {
  --z-behind: -1;
  --z-base: 0;
  --z-raised: 1;
  --z-dropdown: 50;
  --z-sticky: 100;
  --z-header: 150;
  --z-overlay: 200;
  --z-modal: 250;
  --z-popover: 300;
  --z-tooltip: 350;
  --z-toast: 400;
  --z-max: 9999;
}

/* ==========================================================================
   7. BREAKPOINTS (reference pour Tailwind)
   ========================================================================== */

:root {
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;
}

/* ==========================================================================
   8. TAILWIND v4 @theme INTEGRATION (Nouveaux tokens)
   ========================================================================== */

@theme inline {
  /* Trust colors */
  --color-trust: var(--trust);
  --color-trust-light: var(--trust-light);
  --color-trust-bg: var(--trust-background);
  --color-trust-fg: var(--trust-foreground);

  /* Highlight colors */
  --color-highlight-economy: var(--highlight-economy);
  --color-highlight-gain: var(--highlight-gain);
  --color-highlight-premium: var(--highlight-premium);

  /* Step colors */
  --color-step-completed: var(--step-completed);
  --color-step-current: var(--step-current);
  --color-step-upcoming: var(--step-upcoming);

  /* Font families */
  --font-display: var(--font-display);
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
}

/* ==========================================================================
   9. COMPOSANTS TRUST SIGNALS (Utilitaires)
   ========================================================================== */

@layer utilities {
  /* Trust Badge Container */
  .trust-badge {
    background: var(--trust-badge-bg);
    border: 1px solid var(--trust-badge-border);
    color: var(--trust-badge-text);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius);
  }

  /* Counter anim√© */
  .counter-box {
    background: var(--counter-bg);
    border-radius: var(--radius);
    padding: var(--space-4) var(--space-6);
    text-align: center;
  }

  .counter-number {
    color: var(--counter-number);
    font-size: var(--text-display-2);
    font-weight: 700;
    font-variant-numeric: tabular-nums;
  }

  .counter-label {
    color: var(--counter-label);
    font-size: var(--text-body-sm);
    margin-top: var(--space-1);
  }

  /* Certification badge */
  .certification-badge {
    background: var(--certification-bg);
    border: 1px solid var(--certification-border);
    border-radius: var(--radius);
    padding: var(--space-2) var(--space-3);
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
  }

  /* Step indicator */
  .step-dot {
    width: 12px;
    height: 12px;
    border-radius: 9999px;
    border: 2px solid transparent;
    transition: all var(--motion-normal) var(--ease-out);
  }

  .step-dot--completed {
    background: var(--step-completed);
    border-color: var(--step-completed);
  }

  .step-dot--current {
    background: var(--background);
    border-color: var(--step-current);
    box-shadow: var(--glow-accent);
  }

  .step-dot--upcoming {
    background: var(--step-upcoming);
    border-color: var(--step-upcoming);
  }

  /* Progress line */
  .step-line {
    height: 2px;
    flex: 1;
    transition: background-color var(--motion-slow) var(--ease-out);
  }

  .step-line--active {
    background: var(--step-line-active);
  }

  .step-line--inactive {
    background: var(--step-line-inactive);
  }
}

/* ==========================================================================
   10. ANIMATIONS ENRICHIES
   ========================================================================== */

@layer utilities {
  /* Fade variants */
  .animate-fade-in {
    animation: fadeIn var(--motion-slow) var(--ease-out);
  }

  .animate-fade-in-up {
    animation: fadeInUp var(--motion-slow) var(--ease-out);
  }

  .animate-fade-in-down {
    animation: fadeInDown var(--motion-slow) var(--ease-out);
  }

  /* Scale */
  .animate-scale-in {
    animation: scaleIn var(--motion-normal) var(--ease-bounce);
  }

  /* Glow pulsant */
  .animate-glow-pulse {
    animation: glowPulse 2s ease-in-out infinite;
  }

  /* Counter roll (pour NumberTicker) */
  .animate-count-up {
    animation: countUp var(--motion-counter) var(--ease-out);
  }

  /* Shimmer (skeleton loading) */
  .animate-shimmer {
    background: linear-gradient(
      90deg,
      var(--muted) 0%,
      oklch(0.25 0.01 0) 50%,
      var(--muted) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes glowPulse {
  0%, 100% {
    box-shadow: 0 0 15px oklch(0.78 0.18 75 / 0.3);
  }
  50% {
    box-shadow: 0 0 30px oklch(0.78 0.18 75 / 0.5);
  }
}

@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* ==========================================================================
   11. REDUCED MOTION
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
